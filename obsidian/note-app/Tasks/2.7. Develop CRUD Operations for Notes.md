- [x]  **1. Create `crud.py` Functions**

Create or update `backend/app/crud.py` with the following note operations:

```python:backend/app/crud.py
from sqlalchemy.orm import Session
from . import models, schemas
from typing import List, Optional

# Note Operations
def create_note(db: Session, note: schemas.NoteCreate, user_id: int) -> models.Note:
    db_note = models.Note(
        title=note.title,
        content=note.content,
        owner_id=user_id
    )
    db.add(db_note)
    db.commit()
    db.refresh(db_note)
    return db_note

def get_notes(db: Session, user_id: int, skip: int = 0, limit: int = 100) -> List[models.Note]:
    return db.query(models.Note)\
        .filter(models.Note.owner_id == user_id)\
        .offset(skip)\
        .limit(limit)\
        .all()

def get_note(db: Session, note_id: int, user_id: int) -> Optional[models.Note]:
    return db.query(models.Note)\
        .filter(models.Note.id == note_id)\
        .filter(models.Note.owner_id == user_id)\
        .first()

def update_note(db: Session, note_id: int, note: schemas.NoteCreate, user_id: int) -> Optional[models.Note]:
    db_note = get_note(db, note_id, user_id)
    if db_note:
        db_note.title = note.title
        db_note.content = note.content
        db.commit()
        db.refresh(db_note)
    return db_note

def delete_note(db: Session, note_id: int, user_id: int) -> bool:
    db_note = get_note(db, note_id, user_id)
    if db_note:
        db.delete(db_note)
        db.commit()
        return True
    return False
```

- [x] **2. Implement Note Routes**

Create `backend/app/routers/notes.py` with the following endpoints:

```python:backend/app/routers/notes.py
from fastapi import APIRouter, Depends, HTTPException, status
from sqlalchemy.orm import Session
from typing import List
from .. import crud, schemas, models
from ..database import get_db
from ..auth import get_current_user

router = APIRouter(
    prefix="/notes",
    tags=["notes"]
)

@router.post("/", response_model=schemas.Note)
def create_note(
    note: schemas.NoteCreate,
    db: Session = Depends(get_db),
    current_user: models.User = Depends(get_current_user)
):
    return crud.create_note(db=db, note=note, user_id=current_user.id)

@router.get("/", response_model=List[schemas.Note])
def read_notes(
    skip: int = 0,
    limit: int = 100,
    db: Session = Depends(get_db),
    current_user: models.User = Depends(get_current_user)
):
    return crud.get_notes(db, user_id=current_user.id, skip=skip, limit=limit)

@router.get("/{note_id}", response_model=schemas.Note)
def read_note(
    note_id: int,
    db: Session = Depends(get_db),
    current_user: models.User = Depends(get_current_user)
):
    note = crud.get_note(db, note_id=note_id, user_id=current_user.id)
    if note is None:
        raise HTTPException(status_code=404, detail="Note not found")
    return note

@router.put("/{note_id}", response_model=schemas.Note)
def update_note(
    note_id: int,
    note: schemas.NoteCreate,
    db: Session = Depends(get_db),
    current_user: models.User = Depends(get_current_user)
):
    updated_note = crud.update_note(db, note_id=note_id, note=note, user_id=current_user.id)
    if updated_note is None:
        raise HTTPException(status_code=404, detail="Note not found")
    return updated_note

@router.delete("/{note_id}")
def delete_note(
    note_id: int,
    db: Session = Depends(get_db),
    current_user: models.User = Depends(get_current_user)
):
    success = crud.delete_note(db, note_id=note_id, user_id=current_user.id)
    if not success:
        raise HTTPException(status_code=404, detail="Note not found")
    return {"message": "Note deleted successfully"}
```

- [x] 3. Update Main Application

Add the notes router to `main.py`:

```python
from .routers import notes

# Add after existing router includes
app.include_router(notes.router)
```

- [x] 4. Testing Checklist

- [x] Create test file `tests/backend/test_notes.py`
- [x] Test note creation
- [x] Test note retrieval (single and list)
- [x] Test note update
- [x] Test note deletion
- [x] Test authentication requirements
- [x] Test user isolation (users can only access their own notes)

- [x] 5. API Documentation

The following endpoints will be available:

- `POST /notes/` - Create a new note
- `GET /notes/` - Get all notes for current user
- `GET /notes/{note_id}` - Get a specific note
- `PUT /notes/{note_id}` - Update a note
- `DELETE /notes/{note_id}` - Delete a note

- [x] 6. Security Considerations

- [x] All endpoints are protected with authentication
- [x] Users can only access their own notes
- [x] Input validation for note content
- [x] Proper error handling for all operations

- [x] References

- FastAPI Models: 
```markdown:obsidian/note-app/Tasks/2.4. Define Models.md
startLine: 1
endLine: 144
```

- Authentication Implementation:
```markdown:obsidian/note-app/Tasks/2.6. Implement Authentication.md
startLine: 1
endLine: 187
```

- [x] Next Steps

After implementing these changes:
1. Test all endpoints using the Swagger UI
2. Write comprehensive tests
3. Document the API endpoints
4. Proceed to frontend integration