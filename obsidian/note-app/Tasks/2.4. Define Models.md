# Define Database Models

## Prerequisites
- SQLAlchemy installed (verified in requirements.txt)
- Database configuration completed
- Project structure set up

## Steps

### 1. Create User Model
- [x] Create `User` model in `backend/app/models.py`:
  ```python
  from sqlalchemy import Boolean, Column, ForeignKey, Integer, String, Text, DateTime
  from sqlalchemy.orm import relationship
  from sqlalchemy.sql import func
  from .database import Base

  class User(Base):
      __tablename__ = "users"

      id = Column(Integer, primary_key=True, index=True)
      email = Column(String(255), unique=True, index=True)
      hashed_password = Column(String(255))
      is_active = Column(Boolean, default=True)
      created_at = Column(DateTime(timezone=True), server_default=func.now())
      updated_at = Column(DateTime(timezone=True), onupdate=func.now())

      # Relationship with Notes
      notes = relationship("Note", back_populates="owner")
  ```

### 2. Create Note Model
- [x] Add `Note` model in the same file:
  ```python
  class Note(Base):
      __tablename__ = "notes"

      id = Column(Integer, primary_key=True, index=True)
      title = Column(String(255), index=True)
      content = Column(Text)
      created_at = Column(DateTime(timezone=True), server_default=func.now())
      updated_at = Column(DateTime(timezone=True), onupdate=func.now())
      owner_id = Column(Integer, ForeignKey("users.id"))

      # Relationship with User
      owner = relationship("User", back_populates="notes")
  ```

### 3. Verification Steps
- [x] Import models in `main.py`:
  ```python
  from . import models
  ```
- [x] Verify table creation by running the application
- [x] Check database schema using SQLite browser or similar tool

### 4. Model Features
#### User Model:
- Unique email field with index
- Secure password storage
- Active status tracking
- Timestamps for creation and updates
- One-to-many relationship with notes

#### Note Model:
- Title and content fields
- Timestamps for creation and updates
- Foreign key relationship with user
- Bidirectional relationship setup

## Testing Checklist
- [x] Tables are created in database
- [x] Relationships are properly established
- [x] Indexes are created
- [x] Timestamps are working correctly

## Next Steps
After completing this setup, proceed to:
- Create Pydantic schemas
- Implement authentication
- Develop CRUD operations

## Notes
- Use appropriate field lengths for String columns
- Consider adding additional indexes for performance
- Timestamps use timezone-aware DateTime fields
- Relationships are bidirectional for easier querying